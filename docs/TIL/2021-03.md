---
layout: default
title: 2021-03
parent: TIL
nav_order: 2
---

# 2021-03
{: .no_toc }

## contents
{: .no_toc .text-delta }

1. TOC
{:toc}
---

## 2021-03-02

### CORS란 무엇인가?

<b> Cross-Origin Resource Sharing(CORS)는 다른 도메인에서 실행 중인 웹 애플리케이션에서 선택된 자원에 대한 접근 권한을 부여하는 매커니즘이다.
다른 출처(도메인, 프로토콜 또는 포트)를 가진 자원을 요청 할 때, 웹 프로그램은 cross-origin HTTP 요청을 실행한다.
CORS가 등장하게 된 이유는 <b>Same-Origin Policy</b>(동일 출처 정책) 때문이다.
Same-Origin Policy는 어떤 출처에서 불러온 문서나 스크립트가 다른 출처에서 가져온 리소스와 상호작용하는 것을 제한하는 보안 방식을 의미한다.
따라서 따로 CORS정책을 허가하는 조건들을 추가해주어야 다른 Origin과의 자원공유가 가능한 것이다.


---

## 2021-03-03

### 오늘의 일기

매번 혼자서 토이, 미니 프로젝트를 진행할때 한가지 프로젝트를 만들고 그 안에서 여러가지 기능들을 다 넣으려고 했다.
하지만 실무에서는 그렇게 하지않고 모듈을 나눠서 할 것 같아서 오늘은 멀티모듈 프로젝트를 연습했다. 아니나 다를까 다른 개발자의 블로그를 참고하여 똑같이 따라했는데도 안됐는데
마지막에 버전을 좀 낮췄더니 해결.. 내일은 Travis CI를 경험해보고 프로젝트 방향을 잡아서 진행해볼 예정이다.


---

## 2021-03-08

### javascript 단축평가

- 'Cat' || 'Dog' // -> "Cat"
논리곱(&&) 연산자와 논리합(||) 연산자는 이처럼 논리 연산의 결과를 결정하는 피연산자를 타입 변환하지 않고 그대로 반환한다. 이를 단축 평가라 한다.
<b>단축 평가는 표현식을 평가하는 도중에 평가 결과가 확정된 경우 나머지 평가 과정을 생략하는 것을 말한다.</b>

- 객체를 가리키기를 기대하는 변수가 null 또는 undefined가 아닌지 확인하고 프로퍼티를 참조할 때

객체는 키와 값으로 구성된 프로퍼티의 집합이다. 


{% highlight javascript %}
var elem = null;
var value = elem.value // TypeError : Cannot read property 'value' of null
{% endhighlight %}
만약 객체를 가리키기를 기대하는 변수의 값이 객체가 아니라 null 또는 undefined인 경우 객체의 프로퍼티를 참조하면 타입 에러가 발생한다.
이때 단축 평가를 사용하면 에러를 발생시키지 않는다.
{% highlight javascript %}
var elem = null;
var value = elem && elem.value;
{% endhighlight %}

elem이 null이나 undefined와 같은 Falsy 값이면 elem으로 평가되고, elem이 Truthy 값이면 elem.value로 평가된다.

### 옵셔널 체이닝 연산자

옵셔널 체이닝 연산자 ?. 는 좌항의 피연산자가 null 또는 undefined인 경우 undefined를 반환하고, 그렇지 않으면 우항의 프로퍼티 참조를 이어간다.
{% highlight javascript %}
var elem = null;
var value = elem?.value;
// elem이 null 또는 undefined이면 undefined를 반환하고, 그렇지 않으면 우항의 프로퍼티 참조를 이어간다.
console.log(value) // undefined
{% endhighlight %}

{% highlight javascript %}
var str = '';
// 문자열의 길이(length)를 참조한다. 이때 좌항 피연산자가 false로 평가되는 Falsy 값이라도
// null 또는 undefined가 아니면 우항의 프로퍼티 참조를 이어간다.
var length = str?.length;
console.log(length) // 0
{% endhighlight %}

### null 병합 연산자

null 병합 연산자 ??는 좌항의 피연산자가 null 또는 undefined인 경우 우항의 피연산자를 반환하고, 그렇지 않으면 좌항의 피연산자를 반환한다.
null 병합 연산자 ??는 변수에 기본 값을 설정할때 유용하다.

{% highlight javascript %}
var test = null ?? 'default string';
console.log(test); // "default string"
{% endhighlight %}

{% highlight javascript %}
// Falsy 값인 0이나 ''도 기본값으로서 유효하다면 예기치 않은 동작이 발생할 수 있다.
var test = '' || 'default string';
console.log(test); // "default string"

var test2 = '' ?? 'default string';
console.log(test2);
// 좌항의 피연산자가 Falsy 값이라도 null 또는 undefined가 아니면 좌항의 피연산자를 반환한다.
{% endhighlight %}


---

## 2021-03-14

### React & Spring boot 소켓 활용 토이프로젝트 진행 중(1)

요 며칠 코딩테스트 준비 및 토이 프로젝트 진행 때문에 TIL을 작성하지 못했다는 심심한 핑계를 대본다.
우선 현재 알게된 ? 혼자서 이해한 정도만 기록할 겸 적으려고 한다. 이것마저 적지 않으면 매번 까먹을것 같아서 기록해본다.
물론 틀릴 확률이 높지만 나중에 보면서 '그땐 그랬지'라는 생각이 들 수 있게끔...
{% highlight java %}
@MessageMapping("/room/{room}") //리액트에서 SENDMESSAGE랑 연결되는것 같음
    public void test(@DestinationVariable String room,  @Payload ChatMessage chatMessage) throws Exception
    {
        //여기서 /topic/room/{roomId}는 리액트에서  SockJSClient연결할떄 토픽 정해주는데 거기 토픽으로 보낸다는것 같음.
        this.template.convertAndSend("/topic/room/"+room, chatMessage );
    }
{% endhighlight %}

우선 위에는 스프링부트에 작성한 컨트롤러의 소스 코드이다. 
그리고 아래 자바스크립트에서 버튼을 클릭하여 메세지를 보내게 되면 json 형태로 이름과 메세지가 가게된다.
그리고 해당 주소는 /app/room/{room} 이다. 이건 위에 MessageMapping이랑 같다.
또한, 그러면 스프링부트에서 메세지를 받고 /topic/room/{room} 을 구독하는 클라이언트들에게 
메세지를 보내주는 형식인것 같다.

{% highlight javascript %}
 handleButtonClicked(){
        this.clientRef.sendMessage('/app/room/2', JSON.stringify({
            name : this.state.name,
            message : this.state.typedMessage
        }));
    };
{% endhighlight %}

{% highlight javascript %}
 <SockJsClient url='http://localhost:8080/websocket-chat/'
                              topics={['/topic/room/2']} 
		.... 
{% endhighlight %}


--- 

출처
- https://gwonsungjun.github.io/articles/2019-04/gradle_multi_module